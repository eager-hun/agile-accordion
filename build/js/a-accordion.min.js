!function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.updateWidget=updateWidget,this.openInitialItems=openInitialItems,this.openItem=openItem,this.openTab=openTab,this.closeItem=closeItem,this.closeItems=closeItems,this.operateItem=operateItem,this.updateBatchButton=updateBatchButton,this.init()}var pluginName="accdn",defaults={tabsAt:700,exclusiveItems:!1,effectSpeed:700,textForBatchOpen:"Open all",textForBatchClose:"Close all"},$window=$(window),openInitialItems=function(instance){var $initiallyOpenItems=instance.$items.filter(".is-open"),opts={effect:"plain",passFocus:!1};$initiallyOpenItems.each(function(index,value){openItem(instance,$(value),opts)})},updateWidget=function(instance){if(instance.isTabs=$window.innerWidth()>=instance.settings.tabsAt,instance.isTabs){instance.$wrapper.hasClass("is-tabs")||instance.$wrapper.addClass("is-tabs");var $activeTab=instance.$tabs.filter(".is-active");$activeTab.length>0?instance.openTab(instance,$activeTab,!1):instance.openTab(instance,instance.$tabs.first(),!1)}else instance.$wrapper.hasClass("is-tabs")&&instance.$wrapper.removeClass("is-tabs");instance.$batchButton.length>0&&(instance.isTabs?instance.$batchButton.hide():instance.$batchButton.show()),instance.$batchButton.length>0&&instance.updateBatchButton(instance)},openItem=function(instance,$item,opts){switch($item.addClass("is-open"),$item.data("boundTab").addClass("is-active"),opts.effect){case"slide":$item.children(".accdn__content").stop().slideDown(instance.settings.effectSpeed);break;case"plain":$item.children(".accdn__content").stop().show()}instance.isTabs&&opts.passFocus&&$item.children(".accdn__content").focus(),instance.updateBatchButton(instance)},openTab=function(instance,$tabToOpen,passFocus){var $currentItem=$tabToOpen.data("boundItem");instance.$tabs.not($tabToOpen).removeClass("is-active");var opts={effect:"plain"};typeof passFocus!==undefined&&(opts.passFocus=passFocus),instance.closeItems(instance,instance.$items.not($currentItem),opts),instance.openItem(instance,$currentItem,opts)},closeItem=function(instance,$item,opts){switch($item.removeClass("is-open"),$item.data("boundTab").removeClass("is-active"),instance.$items.filter(".is-open").length>0&&instance.$items.filter(".is-open").first().data("boundTab").addClass("is-active"),opts.effect){case"slide":$item.children(".accdn__content").stop().slideUp(instance.settings.effectSpeed);break;case"plain":$item.children(".accdn__content").stop().hide()}instance.updateBatchButton(instance)},closeItems=function(instance,$itemsToClose,opts){$itemsToClose.each(function(){closeItem(instance,$(this),opts)})},operateItem=function(instance,$item,opts){instance.$tabs.removeClass("is-active"),$item.hasClass("is-open")?closeItem(instance,$item,opts):(opts.exclusive&&instance.closeItems(instance,instance.$items.not($item),opts),openItem(instance,$item,opts))},updateBatchButton=function(instance){var $closedItems=instance.$items.filter(":not(.is-open)");$closedItems.length>0?(instance.$batchButton.html(instance.settings.textForBatchOpen),instance.$batchButton.attr("data-next-action","open")):(instance.$batchButton.html(instance.settings.textForBatchClose),instance.$batchButton.attr("data-next-action","close"))};Plugin.prototype.toggleAllInAccordion=function(arg){var self=this;if(this.isTabs)return!1;var opts={};"open"==arg?(opts.effect="slide",opts.passFocus=!1,opts.suppressWidgetUpdate=!0,this.$items.each(function(index,value){openItem(self,$(value),opts)})):(opts.effect="slide",opts.suppressWidgetUpdate=!0,closeItems(this,this.$items,opts)),this.updateWidget(this)},Plugin.prototype.init=function(){var self=this;this.$wrapper=$(this.element),this.$items=this.$wrapper.children(".accdn__item"),this.$heads=this.$items.children(".accdn__head"),this.$contents=this.$items.children(".accdn__content"),this.instanceId=this.$wrapper.attr("id"),this.isTabs=undefined,this.$batchButton=$('[data-accdn-batch-toggle="'+this.instanceId+'"]'),this.$tabsBar=$("<div/>").addClass("accdn__tabs"),this.$wrapper.prepend(this.$tabsBar),this.$tabs=$(),this.$heads.each(function(){var $this=$(this);$this.attr("tabindex",0).find(".text").prepend('<span class="accdn__head__marker"></span>');var $tab=$(['<div class="accdn__tab" tabindex="0">','<span class="text">'+$this.text()+"</span>","</div>"].join(""));$tab.data("boundItem",$this.parent()),$this.parent().data("boundTab",$tab),self.$tabsBar.append($tab),self.$tabs=self.$tabs.add($tab)}),this.$contents.attr("tabindex",-1),this.openInitialItems(this),this.updateWidget(this),this.$wrapper.addClass("accdn-initialized"),$window.on("resize",function(){self.updateWidget(self)}),this.$heads.on("click",function(){var opts={effect:"slide",exclusive:self.settings.exclusiveItems};operateItem(self,$(this).parent(),opts)}),this.$heads.on("keydown",function(event){var keyCode=event.keyCode?event.keyCode:event.charCode;if(13===keyCode||32===keyCode){event.preventDefault();var opts={effect:"slide",exclusive:self.settings.exclusiveItems};operateItem(self,$(this).parent(),opts)}}),this.$tabs.on("click",function(){self.openTab(self,$(this),!0)}),this.$tabs.on("keydown",function(event){var keyCode=event.keyCode?event.keyCode:event.charCode;13!==keyCode&&32!==keyCode||(event.preventDefault(),openTab(self,$(this),!0))})},$("[data-accdn-batch-toggle]").on("click",function(){var $this=$(this),$target=$("#"+$this.attr("data-accdn-batch-toggle"));$target.length>0&&$target[pluginName]("toggleAllInAccordion",$this.attr("data-next-action"))}),$.fn[pluginName]=function(options){if("string"!=typeof options)return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))});var args=Array.prototype.slice.call(arguments,1);this.each(function(){var plugin=$.data(this,"plugin_"+pluginName);plugin[options].apply(plugin,args)})}}(jQuery,this,this.document);
//# sourceMappingURL=/a-accordion/build/js/sourcemaps/a-accordion.min.js.map
